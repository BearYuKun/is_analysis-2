<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="731px" preserveAspectRatio="none" style="width:876px;height:731px;" version="1.1" viewBox="0 0 876 731" width="876px" zoomAndPan="magnify"><defs><filter height="300%" id="f66sbdrs4t5l1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="none" height="29.1201" rx="7.5" ry="7.5" style="stroke: #000000; stroke-width: 2.0;" width="114" x="376.25" y="12"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="384.25" y="33.0439">登录认证流程图</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="61" x2="61" y1="137.2402" y2="636.0474"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="158" x2="158" y1="137.2402" y2="636.0474"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="393" x2="393" y1="137.2402" y2="636.0474"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="720.5" x2="720.5" y1="137.2402" y2="636.0474"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="8" y="115.0439">前端存储Cookie</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="8" y="134.1641">SessionStorage</text><path d="M43,63 C43,53 61,53 61,53 C61,53 79,53 79,63 L79,89 C79,99 61,99 61,99 C61,99 43,99 43,89 L43,63 " fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M43,63 C43,73 61,73 61,73 C61,73 79,73 79,63 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="8" y="651.0913">前端存储Cookie</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="8" y="670.2114">SessionStorage</text><path d="M43,683.2876 C43,673.2876 61,673.2876 61,673.2876 C61,673.2876 79,673.2876 79,683.2876 L79,709.2876 C79,719.2876 61,719.2876 61,719.2876 C61,719.2876 43,719.2876 43,709.2876 L43,683.2876 " fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M43,683.2876 C43,693.2876 61,693.2876 61,693.2876 C61,693.2876 79,693.2876 79,683.2876 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="124" y="134.1641">Login页面</text><ellipse cx="158.5" cy="61.1201" fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M158.5,69.1201 L158.5,96.1201 M145.5,77.1201 L171.5,77.1201 M158.5,96.1201 L145.5,111.1201 M158.5,96.1201 L171.5,111.1201 " fill="none" filter="url(#f66sbdrs4t5l1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="63" x="124" y="651.0913">Login页面</text><ellipse cx="158.5" cy="664.1675" fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M158.5,672.1675 L158.5,699.1675 M145.5,680.1675 L171.5,680.1675 M158.5,699.1675 L145.5,714.1675 M158.5,699.1675 L171.5,714.1675 " fill="none" filter="url(#f66sbdrs4t5l1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="366" y="134.1641">API服务</text><ellipse cx="393.5" cy="61.1201" fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M393.5,69.1201 L393.5,96.1201 M380.5,77.1201 L406.5,77.1201 M393.5,96.1201 L380.5,111.1201 M393.5,96.1201 L406.5,111.1201 " fill="none" filter="url(#f66sbdrs4t5l1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49" x="366" y="651.0913">API服务</text><ellipse cx="393.5" cy="664.1675" fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M393.5,672.1675 L393.5,699.1675 M380.5,680.1675 L406.5,680.1675 M393.5,699.1675 L380.5,714.1675 M393.5,699.1675 L406.5,714.1675 " fill="none" filter="url(#f66sbdrs4t5l1)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="682.5" y="134.1641">数据库存储</text><path d="M702.5,82.1201 C702.5,72.1201 720.5,72.1201 720.5,72.1201 C720.5,72.1201 738.5,72.1201 738.5,82.1201 L738.5,108.1201 C738.5,118.1201 720.5,118.1201 720.5,118.1201 C720.5,118.1201 702.5,118.1201 702.5,108.1201 L702.5,82.1201 " fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M702.5,82.1201 C702.5,92.1201 720.5,92.1201 720.5,92.1201 C720.5,92.1201 738.5,92.1201 738.5,82.1201 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="682.5" y="651.0913">数据库存储</text><path d="M702.5,664.1675 C702.5,654.1675 720.5,654.1675 720.5,654.1675 C720.5,654.1675 738.5,654.1675 738.5,664.1675 L738.5,690.1675 C738.5,700.1675 720.5,700.1675 720.5,700.1675 C720.5,700.1675 702.5,700.1675 702.5,690.1675 L702.5,664.1675 " fill="#FEFECE" filter="url(#f66sbdrs4t5l1)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M702.5,664.1675 C702.5,674.1675 720.5,674.1675 720.5,674.1675 C720.5,674.1675 738.5,674.1675 738.5,664.1675 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#EEEEEE" filter="url(#f66sbdrs4t5l1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="861.5" x="3" y="169.1174"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="864.5" y1="169.1174" y2="169.1174"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="864.5" y1="172.1174" y2="172.1174"/><rect fill="#EEEEEE" filter="url(#f66sbdrs4t5l1)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="106" x="380.75" y="157.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="386.75" y="176.1382">Login登录页面</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="720.5" x2="762.5" y1="216.749" y2="216.749"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="762.5" x2="762.5" y1="216.749" y2="229.749"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="721.5" x2="762.5" y1="229.749" y2="229.749"/><polygon fill="#A80036" points="731.5,225.749,721.5,229.749,731.5,233.749,727.5,229.749" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="727.5" y="211.8926">有每个用户的账号信息</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="393.5" x2="435.5" y1="261.5034" y2="261.5034"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435.5" x2="435.5" y1="261.5034" y2="274.5034"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394.5" x2="435.5" y1="274.5034" y2="274.5034"/><polygon fill="#A80036" points="404.5,270.5034,394.5,274.5034,404.5,278.5034,400.5,274.5034" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="400.5" y="256.647">生成接口服务</text><polygon fill="#A80036" points="381.5,302.2578,391.5,306.2578,381.5,310.2578,385.5,306.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="158.5" x2="387.5" y1="306.2578" y2="306.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="165.5" y="301.4014">点击事件</text><polygon fill="#A80036" points="169.5,316.2578,159.5,320.2578,169.5,324.2578,165.5,320.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="163.5" x2="392.5" y1="320.2578" y2="320.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="158.5" x2="200.5" y1="352.0122" y2="352.0122"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="200.5" x2="200.5" y1="352.0122" y2="365.0122"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="159.5" x2="200.5" y1="365.0122" y2="365.0122"/><polygon fill="#A80036" points="169.5,361.0122,159.5,365.0122,169.5,369.0122,165.5,365.0122" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="165.5" y="347.1558">用户输入用户名和密码，进行登陆操作</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="393.5" x2="435.5" y1="396.7666" y2="396.7666"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="435.5" x2="435.5" y1="396.7666" y2="409.7666"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="394.5" x2="435.5" y1="409.7666" y2="409.7666"/><polygon fill="#A80036" points="404.5,405.7666,394.5,409.7666,404.5,413.7666,400.5,409.7666" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="400.5" y="391.9102">使用RSA根据私钥解密收到的加密密码，得到用户密码</text><polygon fill="#A80036" points="708.5,437.521,718.5,441.521,708.5,445.521,712.5,441.521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="393.5" x2="714.5" y1="441.521" y2="441.521"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="400.5" y="436.6646">从数据库取出用户名以及hash密码</text><polygon fill="#A80036" points="404.5,469.2754,394.5,473.2754,404.5,477.2754,400.5,473.2754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="398.5" x2="719.5" y1="473.2754" y2="473.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="410.5" y="468.4189">比对输入的用户名和密码是否匹配</text><polygon fill="#A80036" points="72,536.5386,62,540.5386,72,544.5386,68,540.5386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="392.5" y1="540.5386" y2="540.5386"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="78" y="500.1733">调用login_user(),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="78" y="517.9277">将用户的ID值写到'session'中</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="78" y="535.6821">并设置失效时间</text><polygon fill="#A80036" points="169.5,568.293,159.5,572.293,169.5,576.293,165.5,572.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="163.5" x2="392.5" y1="572.293" y2="572.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="175.5" y="567.4365">返回成功信息</text><rect fill="#EEEEEE" filter="url(#f66sbdrs4t5l1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="861.5" x="3" y="602.1702"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="864.5" y1="602.1702" y2="602.1702"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="864.5" y1="605.1702" y2="605.1702"/><rect fill="#EEEEEE" filter="url(#f66sbdrs4t5l1)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="203" x="332.25" y="590.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="338.25" y="609.1909">登陆后会将当前用户存入session</text><!--MD5=[00983d7b7ce6a5e3cc85d1ba16b27434]
@startuml
skinparam titleBorderRoundCorner 15
skinparam titleBorderThickness 2
skinparam titleBorderColor #Black
skinparam titleFontSize 24
Title 登录认证流程图

database "前端存储Cookie\nSessionStorage" as 前端存储
actor Login页面
actor API服务
database 数据库存储

== Login登录页面 ==
数据库存储->数据库存储:有每个用户的账号信息
API服务->API服务:生成接口服务
Login页面->API服务:点击事件
API服务->Login页面:
Login页面->Login页面:用户输入用户名和密码，进行登陆操作
API服务->API服务:使用RSA根据私钥解密收到的加密密码，得到用户密码
API服务->数据库存储:从数据库取出用户名以及hash密码
数据库存储->API服务:比对输入的用户名和密码是否匹配
API服务->前端存储:调用login_user(),\n将用户的ID值写到'session'中\n并设置失效时间
API服务->Login页面:返回成功信息
== 登陆后会将当前用户存入session==

@enduml

PlantUML version 1.2019.11(Sun Sep 22 18:02:15 CST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-b520.38
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>